<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sudoku Accessoriser</title>
    <link rel="stylesheet" href="./src/styles.css">
</head>
<body>
    <!-- Toast notification container -->
    <div id="toast-container" class="toast-container"></div>
    
    <!-- Loading overlay -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-title" id="loading-title">Loading...</div>
            <div class="loading-message" id="loading-message">Please wait</div>
            <div class="loading-progress" id="loading-progress" style="display: none;">
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <div class="progress-text" id="progress-text">0%</div>
            </div>
        </div>
    </div>
    
    <div class="container">
        <header>
            <div class="header-content">
                <div>
                    <h1>Sudoku Accessoriser</h1>
                    <p>Make sudoku puzzles more accessible by customizing their visual features</p>
                    <span class="version">v1.2.0</span>
                </div>
                <button id="theme-toggle" class="theme-toggle" aria-label="Toggle dark/light mode">
                    <span class="theme-icon">ðŸŒ™</span>
                </button>
            </div>
        </header>

        <main>
            <!-- Step 1: URL Input -->
            <section id="url-input-section" class="step active">
                <h2>Enter Puzzle URL</h2>
                <form id="puzzle-url-form">
                    <div class="input-group">
                        <label for="puzzle-url">SudokuPad Puzzle URL:</label>
                        <div class="input-wrapper">
                            <input type="url" id="puzzle-url" name="puzzle-url" 
                                   placeholder="https://sudokupad.app/..." required>
                            <span class="validation-icon" id="validation-icon"></span>
                        </div>
                        <div class="input-feedback" id="url-feedback"></div>
                    </div>
                    <button type="submit">Load Puzzle</button>
                </form>
            </section>

            <!-- Step 2: Feature List -->
            <section id="features-section" class="step hidden">
                <h2 id="puzzle-title">Puzzle Features</h2>
                <p>Customize the visual appearance of these puzzle features:</p>
                <div id="features-list" class="features-grid">
                    <!-- Features will be populated dynamically -->
                </div>
                <div class="step-actions">
                    <button id="back-to-url" class="secondary-btn">Back</button>
                    <button id="preview-puzzle" class="primary-btn">Open Customized Puzzle</button>
                </div>
            </section>

            <!-- Step 3: Preview and Export -->
            <section id="preview-section" class="step hidden">
                <h2>Preview & Export</h2>
                <div class="preview-container">
                    <p>Your customized puzzle is ready!</p>
                    <div id="puzzle-preview">
                        <!-- Puzzle preview will be shown here -->
                    </div>
                </div>
                <div class="step-actions">
                    <button id="back-to-features" class="secondary-btn">Back to Features</button>
                    <button id="open-puzzle" class="primary-btn">Open Puzzle in New Tab</button>
                </div>
            </section>
        </main>
    </div>

    <!-- PuzzleConverter dependencies -->
    <script src="./src/sudokupad/utilities.js"></script>
    <script src="./src/sudokupad/puzzlezipper.js"></script>
    <script src="./src/sudokupad/fpuzzlesdecoder.js"></script>
    <script src="./src/sudokupad/puzzletools.js"></script>
    <script src="./src/sudokupad/puzzleloader.js"></script>
    <script src="./src/puzzle-converter.js"></script>
    
    <!-- New modular classes -->
    <script src="./src/notification-manager.js"></script>
    <script src="./src/validation-manager.js"></script>
    <script src="./src/puzzle-manager.js"></script>
    <script src="./src/feature-manager.js"></script>
    <script src="./src/ui-controller.js"></script>
    <script src="./src/theme-manager.js"></script>
    
    <!-- Main application script -->
    <script src="./src/script.js"></script>
</body>
</html>